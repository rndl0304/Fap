<!DOCTYPE html>
<html>
<head>
<title>Tutorial de Alert em JavaScript - Linha de CÃ³digo</title>
<script>

let Contas = [];
let numeroConta = 1;

class Conta {
  constructor(nome,telefone, dataDeNascimento, saldo, numConta) {
    this.nome = nome;
    this.dataDeNascimento = dataDeNascimento;
    this.telefone = telefone;
    this.saldo = saldo;
    this.Numconta = numConta;
  }

  Creditar(valor) {
    this.saldo += valor;
    alert("Novo Valor: " + this.saldo);
  }

  Exibir() {
    alert("Nome: "+ this.nome +" Telefone: " + this.telefone + 
    " Nascimento: "+ this.dataDeNascimento + " Saldo: " + this.saldo +
    " Numero da conta: " + this.Numconta );
  }

  Debitar(valor) {
    if (this.saldo >= valor) {
      this.saldo -= valor;
      alert("Novo Valor: " + this.saldo);
    } else {
        alert("Saldo Insuficiente");
    }
  }
}
function CriarConta() {
  nome = prompt('Digite o nome');
  telefone = prompt('Digite o telefone');
  dataNascimento = prompt('Digite Nascimento');

  Contas.push(new Conta(nome, telefone, dataNascimento, 1000, numeroConta));
  numeroConta++;
}
function Exibir() {
  let numconta = parseInt(prompt('Digite o numero da conta'));
  let valid = false;
  Contas.forEach(conta => {
    if(conta.Numconta == numconta)
    {
        conta.Exibir();
        valid = true;
    }
  });

  if(!valid)
    alert("Conta Invalida");
}
function Debitar() {
  conta = parseInt(prompt('Digite o numero da conta'));
  valor = parseInt(prompt('Digite o valor'));
  let valid = false;
  Contas.forEach(element => {
    if(element.Numconta == conta)
    {
        element.Debitar(valor);
        valid = true;
    }
  });

  if(!valid)
    alert("Conta Invalida");
}
function Remover() {
  conta = parseInt(prompt('Digite o numero da conta'));
  let valid = false;

  for(i = 0; i < Contas.length;i++)
  {
    if(Contas.Numconta == conta)
    {
        Contas.splice(i, 1);
        alert("Conta Removida");
        break;
    }
        
  }
    alert("Conta Invalida");
}
function Transferir()
{
    let ContaOri;
    let ContaDes;

    contaOrigem = parseInt(prompt('Digite conta de origem:'));
    // verifica se a conta ofigem e valida 
    let valid = false;
    Contas.forEach(conta => {
        if(conta.Numconta == contaOrigem)
        {
            ContaOri = conta;
            valid = true;
        }
    });

    if(!valid)
    {
        alert("Conta Invalida!")
        return
    }

    contaDestine = parseInt(prompt('Digite conta de destino:'));
    // verifica se a conta destino e valida
    Contas.forEach(conta => {
        if(conta.Numconta == contaDestine)
        {
            ContaDes = conta;
            valid = true;
        }
    });
    
    if(!valid)
    {
        alert("Conta Invalida!")
        return
    }

    // pega valor
    valor = parseInt(prompt('Digite Valor:'));
    
    ContaOri.Debitar(valor);
    ContaDes.Creditar(valor);

    ContaOri.Exibir();
    ContaDes.Exibir();

}

</script>
</head>
<body>

<input type="button" onclick="CriarConta()" value="Criar Conta" />
<input type="button" onclick="Transferir()" value="Transferir" />
<input type="button" onclick="Exibir()" value="Exibir" />
<input type="button" onclick="Remover()" value="Remover" />
<input type="button" onclick="Debitar()" value="Debitar" />

</body>
</html>
